asyncapi: "2.6.0"
info:
  title: Mainflux ws adapter
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  version: '1.0.0'
  description: WebSocket API for sending messages through communication channels

defaultContentType: application/json

servers:
  dev:
    url: localhost:{port}
    protocol: ws
    description: Test broker
    variables:
      port:
        description: MF_WS_Adapter port
        default: '8186'
        enum:
          - '8186'

channels:
  channels/{channelId}/messages/{subtopic}:
    parameters:
      channelId:
        $ref: '#/components/parameters/channelId'
      subtopic:
        $ref: '#/components/parameters/subtopic'
    publish:
      message:
        $ref: '#/components/messages/jsonMsg'
    subscribe:
      message:
        $ref: '#/components/messages/jsonMsg'

components:
  messages:
    jsonMsg:
      title: JSON Message
      summary: Arbitrary JSON array or object.
      contentType: application/json
      payload:
        $ref: "#/components/schemas/jsonMsg"

  schemas:
    jsonMsg:
      type: object
      description: Arbitrary JSON object or array. SenML format is recommended.
      example: |
        ### SenML
        ```json
        [{"bn":"some-base-name:","bt":1641646520, "bu":"A","bver":5, "n":"voltage","u":"V","v":120.1}, {"n":"current","t":-5,"v":1.2}, {"n":"current","t":-4,"v":1.3}]
        ```
        ### JSON
        ```json
        {"field_1":"val_1", "t": 1641646525}
        ```
        ### JSON Array
        ```json
        [{"field_1":"val_1", "t": 1641646520},{"field_2":"val_2", "t": 1641646522}]
        ```

  parameters:
    channelId:
      description: Channel ID connected to the Thing ID defined in the username.
      schema:
        type: string
        format: uuid
    subtopic:
      description: Arbitrary message subtopic.
      schema:
        type: string
        default: ''


  